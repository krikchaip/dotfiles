set -g @popup-on-init "
 ; set exit-empty off
 ; set status off
 ; set -g prefix C-a
 ; bind C-a send-prefix
"

set -g @popup-id-format "#{b:socket_path}/#{session_name}/{popup_name}"

bind -N "[Pane] Toggle floating" f   run-shell "#{@popup-toggle} --toggle-key '-n C-z' --name=floating -d '#{pane_current_path}' -E"
bind -N "[Pane] Toggle floating" C-f run-shell "#{@popup-toggle} --toggle-key '-n C-z' --name=floating -d '#{pane_current_path}' -E"

bind -N "[Popup] Open CodeCompanion" c   run-shell "#{@popup-toggle} --toggle-key '-n C-z' -w 60% -h 60% --name=codecompanion -d '#{pane_current_path}' -E 'NVIM_MINIMAL=true NVIM_APPNAME=nvchad nvim +CodeCompanionChat'"
bind -N "[Popup] Open CodeCompanion" C-c run-shell "#{@popup-toggle} --toggle-key '-n C-z' -w 60% -h 60% --name=codecompanion -d '#{pane_current_path}' -E 'NVIM_MINIMAL=true NVIM_APPNAME=nvchad nvim +CodeCompanionChat'"

# workaround for launching Yazi within a tmux popup.
# ref: https://github.com/sxyazi/yazi/issues/2308
bind -N "[Popup] Open yazi at \$PWD" y   run-shell "#{@popup-toggle} --toggle-key '-n C-z' -w 80% --name=yazi_pwd -d '#{pane_current_path}' -E 'nvim -u ~/.config/yazi/start.lua'"
bind -N "[Popup] Open yazi at \$PWD" C-y run-shell "#{@popup-toggle} --toggle-key '-n C-z' -w 80% --name=yazi_pwd -d '#{pane_current_path}' -E 'nvim -u ~/.config/yazi/start.lua'"
bind -N "[Popup] Open yazi at home"  Y   run-shell "#{@popup-toggle} --toggle-key '-n C-z' -w 80% --name=yazi_home -E 'nvim -u ~/.config/yazi/start.lua ~'"

# vim:ft=tmux.chezmoitmpl
